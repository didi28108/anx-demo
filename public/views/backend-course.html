<style>
	.list-group-item {
		overflow: auto;
	}
</style>
<div ng-controller="BECourseCtrl">
	<!-- course managing start -->
	<div ng-show="showCourseManage">
		<button class="btn btn-default" ng-click="goAdd()">
			<span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新增課程
		</button>
		<button class="btn btn-default" ng-click="switchManageMode()">
			<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 單位管理
		</button>
		<br>
		
		<div class="col-md-3">
			<h3>課程單位 <span class="label label-success">雲科大</span></h3>
			<div class="list-group">
				<a ng-repeat="cat in categoryList | filter:{class:classes[0]}" href="" class="list-group-item" ng-click="showCourse()">
					<span ng-if="!cat.show" class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
					{{cat.deptName}}
					<span class="badge">{{cat.course.length}}</span>
				</a>
			</div>
			<hr>
			<h3>課程單位 <span class="label label-primary">政府單位</span></h3>
			<div class="list-group">
				<a ng-repeat="cat in categoryList | filter:{class:classes[1]}" href="" class="list-group-item" ng-click="showCourse()">
					{{cat.deptName}}
					<span class="badge">{{cat.course.length}}</span>
				</a>
			</div>
		</div>

		<div class="col-md-9">
			<h3>{{currentCategory.deptName}}</h3>
			<!-- search bar -->
			<div class="input-group">
				<span class="input-group-addon" id="sizing-addon1">
					<span class="glyphicon glyphicon-search" aria-hidden="true"></span>
				</span>
				<input type="text" class="form-control" placeholder="搜尋課程" aria-describedby="sizing-addon1" ng-model="searchFish">
			</div>
			<br>
			<div class="panel panel-default">
			  <!-- Table -->
			  <table class="table table-striped table-hover">
			  	<thead>
			  		<tr>
			  			<th>
							<a href="#" ng-click="sortType = 'area'; sortReverse = !sortReverse">地區</a>
			  				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true" ng-show="sortType == 'area' && !sortReverse"></span>
							<span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ng-show="sortType == 'area' && sortReverse"></span>
			  			</th>
			  			<th>
			  				<a href="#" ng-click="sortType = 'no'; sortReverse = !sortReverse">課號</a>
			  				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true" ng-show="sortType == 'no' && !sortReverse"></span>
							<span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ng-show="sortType == 'no' && sortReverse"></span>
			  			</th>
			  			<th>課程資訊</th>
			  			<!-- <th>
			  				<a href="#" ng-click="sortType = 'deptName'; sortReverse = !sortReverse">課程名稱</a>
			  				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true" ng-show="sortType == 'deptName' && !sortReverse"></span>
							<span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ng-show="sortType == 'deptName' && sortReverse"></span>
						</th>
						<th>
			  				<a href="#" ng-click="sortType = 'startDate'; sortReverse = !sortReverse">課程期間</a>
			  				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true" ng-show="sortType == 'course.startDate' && !sortReverse"></span>
							<span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ng-show="sortType == 'course.startDate' && sortReverse"></span>
						</th> -->
			  			<th>
							<a href="#" class="text-nowrap" ng-click="sortType = 'confirmDate'; sortReverse = !sortReverse">開課確認日期</a>
			  				<span class="glyphicon glyphicon-chevron-down" aria-hidden="true" ng-show="sortType == 'confirmdate' && !sortReverse"></span>
							<span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ng-show="sortType == 'confirmdate' && sortReverse"></span>
			  			</th>
			  			<th>課程狀態</th>
			  			<th>選項</th>
			  			<th>推薦</th>
			  			<th>顯示</th>
			  		</tr>
			  	</thead>
			  	<tbody>
			  		<tr ng-if="course.category.deptCode==currentCategory.deptCode" ng-repeat="course in courses | orderBy:sortType:sortReverse | filter:searchFish" id="{{course._id}}">
			  			<td><span class="label label-primary">{{course.area}}</span></td>
			  			<td class="text-nowrap">{{course.fullNo}}</td>
			  			<td>
			  				<a href="/backend/course/{{course._id}}">{{course.name}}</a>
			  				<div class="text-nowrap">
			  					{{course.startDate}} - {{course.endDate}}
			  				</div>
			  			</td>
			  			<!-- <td class="text-nowrap">
			  				{{course.startDate}} - <br>
			  				{{course.endDate}}
			  			</td> -->

			  			<td>{{course.confirmDate}}</td>
			  			<td>
			  				<select class="form-control" ng-model="course.state" ng-change="stateChanged()">
								<option ng-repeat="state in courseStateList" value="{{state}}">{{state}}</option>
							</select>
			  			</td>
			  			<td class="text-nowrap">
			  				<button class="btn btn-warning btn-sm" ng-click="goEdit()">編輯</button>
			  				<button class="btn btn-danger btn-sm" ng-click="delete()">刪除</button>
			  			</td>
			  			<td>
			  				<select class="form-control" ng-options="option.value as option.text for option in coursePinTopList" ng-model="course.pinTop" ng-change="pinTopChanged()"></select>
			  			</td>
			  			<td>
			  				<select class="form-control" ng-options="option.value as option.text for option in courseShowList" ng-model="course.show" ng-change="showChanged()"></select>
			  			</td>
			  		</tr>
			  	</tbody>
			  </table>
			</div>
		</div>
	</div><!-- end of course manage wrap -->


	<!-- course category managing start -->
	<div ng-show="showCategoryManage">
		<div class="row">
			<div class="col-md-2">
				<br>
				<button class="btn btn-default" ng-click="switchManageMode()">
					<span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span> 回課程管理
				</button>
			</div>
			<div class="col-md-3">
				<h3>課程單位 <span class="label label-success">雲科大</span></h3>
				<div class="list-group">
					<a ng-repeat="cat in categoryList | filter:{class:classes[0]}" href="" class="list-group-item" ng-click="showCategoryData()">
						<span ng-if="!cat.show" class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
						{{cat.deptName}}
						<span class="badge">{{cat.course.length}}</span>
					</a>
				</div>
				<hr>
				<h3>課程單位 <span class="label label-primary">政府單位</span></h3>
				<div class="list-group">
					<a ng-repeat="cat in categoryList | filter:{class:classes[1]}" href="" class="list-group-item" ng-click="showCategoryData()">
						{{cat.deptName}}
						<span class="badge">{{cat.course.length}}</span>
					</a>
				</div>
			</div>
			<div class="col-md-7">
				<h3>&nbsp;</h3>
				<div class="col-md-4 affix">
					<div class="panel" id="categoryPanel">
					  <div class="panel-heading">{{panelTitle}}</div>
					  <div class="panel-body">
					    <form class="form-horizontal" role="form" name="someForm">
					      <div class="form-group">
					      	<label class="control-label col-md-3" for="class">類別</label>
					      	<div class="col-md-5">
					      	  <select class="form-control" id="class" ng-model="categoryFormData.class">
					      	    <option ng-repeat="class in classes" value="{{class}}">{{class}}</option>
					      	  </select>
					      	</div>
					      </div>
						  <div class="form-group">
						  	<label class="control-label col-md-3" for="category">單位名稱</label>
							<div class="col-md-8">
							  <input type="text" class="form-control" id="deptName" name="deptName" placeholder="" ng-model="categoryFormData.deptName" required>
							  <span class="unvalid-alert" ng-hide="someForm.deptName.$valid">必填欄位</span>
							</div>
						  </div>
						  <div class="form-group">
							<label class="control-label col-md-3" for="category">單位縮寫</label>
							<div class="col-md-8">
							  <input type="text" class="form-control" id="deptCode" name="deptCode" placeholder="" ng-model="categoryFormData.deptCode" ng-pattern="/^[A-Za-z][A-Za-z]*$/" required>
							  <span class="unvalid-alert" ng-hide="someForm.deptCode.$valid">必填欄位，限英文字</span>
							</div>
						  </div>
						  <div class="form-group">
						  	<label class="control-label col-md-3" for="category">顯示狀態</label>
						  	<div class="col-md-8">
						  	  <div class="input-group">
						      	<label class="radio-inline">
						      	  <input type="radio" name="show_radio" value="true" ng-model="categoryFormData.show"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
						      	</label>
						      	<label class="radio-inline">
						      	  <input type="radio" name="show_radio" value="false" ng-model="categoryFormData.show"><span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
						      	</label>
						  	  </div>
							</div>
						  </div>
						  <div class="form-group">
						  	<div class="col-md-offset-3 col-md-9">
						  	  <button class="btn btn-info" ng-show="showAddCategoryBtn" ng-disabled="!someForm.$valid" ng-click="addCategory()">新增</button>
						  	  <button class="btn btn-warning" ng-show="showEditCategoryBtn" ng-disabled="!someForm.$valid" ng-click="saveCategory()">儲存</button>
						  	  <button class="btn btn-default" ng-click="cancel()">取消</button>
						  	</div>
						  </div>
						</form>
					  </div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
		  <div class="col-md-offset-2 col-md-5">
			<hr>
			
		  </div>
		</div>
	</div>
	
</div>
